import{_ as N,c as n,o as l,a as s,h as B,F as C,d as W,n as $,i as k,t as m,u as j,g as V,r as f,b as H,j as E,w as U,e as G,k as J,v as K,l as Q,m as X,p as Y,q as M}from"./index-CHE3jmAR.js";import{P as R,g as Z,_ as ss}from"./Problem-CL8vjfpp.js";import{c as P}from"./config-CouUdNBE.js";const es=["start","id"],ts={class:"problem-font-marker"},is={key:1},ns={key:2,class:"ts-divider is-section"},ls={key:0,class:"ts-wrap is-vertical is-middle-aligned exam-cover"},os={class:"ts-text is-huge is-bold"},as={class:"ts-list is-unordered"},rs={class:"item"},us={key:1,class:"ts-wrap is-vertical is-middle-aligned exam-cover"},ds={__name:"ExamPaper",props:{uni:String,year:String,examConfig:Object,isContentVisible:Boolean,isProblemVisible:Boolean,isExamOver:Boolean,examTimeSec:Number},emits:["clickStartExam","resetTimer"],setup(t,{emit:p}){const o=p;return(T,i)=>(l(),n(C,null,[s("div",{class:"ts-content exam",style:$({filter:t.isProblemVisible?"none":"blur(10px)"})},[(l(!0),n(C,null,W(t.examConfig.section,(r,u)=>(l(),n(C,null,[r[0]!=="-"?(l(),n("ol",{key:0,style:$({"padding-left":11+9*r.length+"px"}),start:r,id:`exam-paper-p${r}`},[s("li",ts,[k(R,{uni:t.uni,year:t.year,no:r,problemConfig:t.examConfig.problem[r],contentType:t.isContentVisible?"link":void 0,isScoreVisible:""},null,8,["uni","year","no","problemConfig","contentType"])])],12,es)):(l(),n("div",is,[k(R,{uni:t.uni,year:t.year,no:r},null,8,["uni","year","no"])])),u!=t.examConfig.section.length-1?(l(),n("div",ns)):B("",!0)],64))),256))],4),t.isProblemVisible?B("",!0):(l(),n(C,{key:0},[t.isExamOver?(l(),n("div",us,[i[7]||(i[7]=s("div",{class:"ts-text is-huge is-bold"},"考試結束",-1)),s("button",{class:"ts-button is-start-icon",onClick:i[1]||(i[1]=r=>{o("resetTimer")})},i[6]||(i[6]=[s("span",{class:"ts-icon is-arrow-rotate-left-icon"},null,-1),V("重新計時 ")]))])):(l(),n("div",ls,[s("div",os,m(j(P).uni[t.uni].shortName)+"  "+m(t.year),1),s("div",as,[s("div",rs," 快速看過全部題目後再開始作答，考試時間為 "+m(Math.floor(t.examTimeSec/60))+" 分鐘，請做好配速。 ",1),i[2]||(i[2]=s("div",{class:"item"},"如果有給手寫答案紙，且題本沒有附註「只寫答案即可」，建議附上運算過程。",-1)),i[3]||(i[3]=s("div",{class:"item"},"簡單題目請先做完，若時間夠，驗算一遍後再做剩餘題目。",-1))]),s("button",{class:"ts-button is-start-icon",onClick:i[0]||(i[0]=r=>{o("clickStartExam")})},i[4]||(i[4]=[s("span",{class:"ts-icon is-pen-icon"},null,-1),V("開始作答 ")])),i[5]||(i[5]=s("div",{class:"ts-text is-small is-secondary is-italic"}," 如果你只想翻閱一下歷屆試題，可以關閉左側選單中的「測驗模式」 ",-1))]))],64))],64))}},cs=N(ds,[["__scopeId","data-v-6c8822f9"]]),ms={class:"sidebar-table"},vs={__name:"ExamInfo",props:{uniShortName:String,year:String,subjectId:String,subject:String},setup(t){return(p,o)=>(l(),n("table",ms,[s("tbody",null,[s("tr",null,[o[0]||(o[0]=s("td",null,[s("span",{class:"ts-icon is-school-icon"})],-1)),s("td",null,m(t.uniShortName?t.uniShortName:"-"),1)]),s("tr",null,[o[1]||(o[1]=s("td",null,[s("span",{class:"ts-icon is-calendar-icon"})],-1)),s("td",null,m(t.year?t.year:"-")+" 年 ",1)]),s("tr",null,[o[3]||(o[3]=s("td",null,[s("span",{class:"ts-icon is-hashtag-icon"})],-1)),s("td",null,[s("span",null,m(t.subjectId?t.subjectId:"-"),1),o[2]||(o[2]=s("span",{class:"ts-icon is-circle-question-icon is-start-spaced","data-tooltip":"科目代號"},null,-1))])]),s("tr",null,[o[4]||(o[4]=s("td",null,[s("span",{class:"ts-icon is-file-icon"})],-1)),s("td",null,m(t.subject?t.subject:"-"),1)])])]))}},bs=N(vs,[["__scopeId","data-v-f6e85069"]]),fs={class:"ts-grid"},xs={class:"column"},ps={class:"ts-box is-vertical is-compact sidebar"},gs={class:"ts-content is-dense"},ys={class:"ts-content is-dense sidebar-setting"},ks={class:"ts-switch"},Ss={class:"ts-content is-dense"},Cs={class:"ts-wrap is-compact is-middle-aligned"},Es=["disabled"],$s={key:0,class:"ts-icon is-pause-icon"},Vs={key:1,class:"ts-icon is-play-icon"},Ts=["disabled"],hs={key:0,class:"sidebar-timer-time"},js={key:1,class:"sidebar-timer-time"},Ps={class:"ts-content is-dense"},Ns=["href","data-tooltip"],_s={key:1},ws={class:"column is-fluid"},Is={class:"ts-box"},Os={__name:"ExamView",setup(t){const p=Z(),o=X(),T=Y(),i=f(void 0),r=f(void 0),u=f({});H(()=>{if(!p.examScrollProbNo)return;const a=10;let e=0;const v=setInterval(()=>{e++,e>a&&clearInterval(v);const b=document.querySelector(`#exam-paper-p${p.examScrollProbNo}`);b&&(b.scrollIntoView({behavior:"smooth",block:"start"}),p.examScrollProbNo=void 0,clearInterval(v))},100)}),E(()=>o.params.id,async a=>{var e=a.split("-");if(e.length!=2){D(a);return}const[v,b]=e,O=await ss(Object.assign({"../../components/exam/ntu/111/config.json":()=>M(()=>import("./config-BkiAkXrA.js"),[]),"../../components/exam/ntu/112/config.json":()=>M(()=>import("./config-BgjZKRP_.js"),[])}),`../../components/exam/${v}/${b}/config.json`,7).catch(()=>q(v,b));O&&(i.value=v,r.value=b,u.value=O.default)},{immediate:!0});function D(a){console.error(`Wrong id format. (exam id: ${a})
`),T.push("/exam")}function q(a,e){console.error(`Exam config is not exist. (exam ${a}-${e})
-> Check if @/components/exam/${a}/${e}/config.json exist?
`),T.push("/exam")}const c=f(!1),x=f(!c.value),g=f(!1),y=f(6e3),d=f(y.value);E(c,a=>{S(),x.value=!a}),E(u,()=>{c.value&&_()});const F=()=>{d.value<=0||(L(),x.value||(x.value=!0))},_=()=>{S(),x.value=!1},A=()=>{S(),w(),x.value=!0};let h=null;const w=()=>{g.value=!0,h=setInterval(()=>{d.value--},1e3)},I=()=>{g.value=!1,clearInterval(h),h=null},S=()=>{I(),d.value=y.value},L=()=>{g.value?I():w()};E(d,a=>{a<=0&&(x.value=!1)});const z=()=>{};return(a,e)=>{const v=G("router-link");return l(),n("div",fs,[s("div",xs,[s("div",ps,[s("div",gs,[e[2]||(e[2]=s("span",{class:"ts-icon is-reply-icon is-end-spaced"},null,-1)),k(v,{to:"/exam",class:"hyperlink"},{default:U(()=>e[1]||(e[1]=[V(" 回題本選單")])),_:1})]),e[8]||(e[8]=s("div",{class:"ts-divider"},null,-1)),s("div",ys,[s("label",ks,[J(s("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=b=>c.value=b),checked:""},null,512),[[K,c.value]]),e[3]||(e[3]=s("span",null,"測驗模式 ",-1)),e[4]||(e[4]=s("span",{class:"ts-icon is-circle-question-icon","data-tooltip":"開啟測驗模式後，題本內容會在作答前被隱藏，<br>並且不顯示解答。","data-html":"true"},null,-1))])]),e[9]||(e[9]=s("div",{class:"ts-divider"},null,-1)),s("div",Ss,[k(bs,{uniShortName:j(P).uni[i.value]?j(P).uni[i.value].shortName:void 0,year:r.value,subjectId:u.value.id,subject:u.value.subject},null,8,["uniShortName","year","subjectId","subject"])]),e[10]||(e[10]=s("div",{class:"ts-divider"},null,-1)),s("div",{class:"ts-content is-dense sidebar-timer",style:$({opacity:c.value?1:.4})},[s("div",Cs,[s("button",{class:"ts-button is-small is-icon is-outlined",onClick:F,disabled:!c.value},[g.value?(l(),n("span",$s)):(l(),n("span",Vs))],8,Es),s("button",{class:"ts-button is-small is-icon is-outlined",onClick:_,disabled:!c.value},e[5]||(e[5]=[s("span",{class:"ts-icon is-rotate-left-icon"},null,-1)]),8,Ts),d.value>=0?(l(),n("span",hs,m(Math.floor(d.value/60))+":"+m(String(d.value%60).padStart(2,"0")),1)):(l(),n("span",js,"0:00"))]),s("div",{class:Q(["ts-progress is-tiny sidebar-timer-progress",g.value?"is-processing":""])},[s("div",{class:"bar",style:$({"--value":100*(d.value/y.value),"background-color":d.value/y.value>.1?"#9bf":"#f88"})},null,4)],2)],4),e[11]||(e[11]=s("div",{class:"ts-divider"},null,-1)),s("div",Ps,[e[6]||(e[6]=s("span",{class:"ts-icon is-link-icon is-end-spaced"},null,-1)),u.value.link?(l(),n("a",{key:0,class:"hyperlink",href:u.value.link,"data-tooltip":u.value.linkTip?u.value.linkTip:"沒有附註任何東西捏 (´･ω･`)",target:"_blank"},"題本來源",8,Ns)):(l(),n("span",_s,"來源未知"))]),e[12]||(e[12]=s("div",{class:"ts-divider"},null,-1)),s("div",{class:"ts-content is-dense"},[s("button",{class:"ts-button is-outlined is-start-icon",onClick:z,"data-tooltip":"暫時想不到要怎麼做 ฅ^⦁⩊⦁^ฅ ੭"},e[7]||(e[7]=[s("span",{class:"ts-icon is-download-icon"},null,-1),V("下載題本 ")]))])])]),s("div",ws,[s("div",Is,[k(cs,{uni:i.value,year:r.value,examConfig:u.value,isContentVisible:!c.value,isProblemVisible:x.value,isExamOver:d.value<=0,examTimeSec:y.value,onClickStartExam:A,onResetTimer:S},null,8,["uni","year","examConfig","isContentVisible","isProblemVisible","isExamOver","examTimeSec"])])])])}}},Ds=N(Os,[["__scopeId","data-v-e395ad8b"]]);export{Ds as default};
