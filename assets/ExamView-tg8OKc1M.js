import{_ as N,c as n,o as l,a as s,h as B,F as C,d as H,n as $,i as k,t as m,u as T,g as V,r as f,b as U,j as E,w as G,e as J,k as K,v as Q,l as X,m as Y,p as Z,q as M}from"./index-Cy3ykrE4.js";import{P as R,g as ss,_ as es}from"./Problem-BT3WSlwo.js";import{c as j}from"./config-BcbHZzt7.js";const ts=["start","id"],is={class:"problem-font-marker"},ns={key:1},ls={key:2,class:"ts-divider is-section"},os={key:0,class:"ts-wrap is-vertical is-middle-aligned exam-cover"},as={class:"ts-text is-huge is-bold"},rs={class:"ts-list is-unordered"},us={class:"item"},ds={key:1,class:"ts-wrap is-vertical is-middle-aligned exam-cover"},cs={__name:"ExamPaper",props:{uni:String,year:String,examConfig:Object,isContentVisible:Boolean,isProblemVisible:Boolean,isExamOver:Boolean,examTimeSec:Number},emits:["clickStartExam","resetTimer"],setup(t,{emit:p}){const o=p;return(P,i)=>(l(),n(C,null,[s("div",{class:"ts-content exam",style:$({filter:t.isProblemVisible?"none":"blur(10px)"})},[(l(!0),n(C,null,H(t.examConfig.section,(r,u)=>(l(),n(C,null,[r[0]!=="-"?(l(),n("ol",{key:0,style:$({"padding-left":11+9*r.length+"px"}),start:r,id:`exam-paper-p${r}`},[s("li",is,[k(R,{uni:t.uni,year:t.year,no:r,problemConfig:t.examConfig.problem[r],contentType:t.isContentVisible?"link":void 0,isScoreVisible:""},null,8,["uni","year","no","problemConfig","contentType"])])],12,ts)):(l(),n("div",ns,[k(R,{uni:t.uni,year:t.year,no:r},null,8,["uni","year","no"])])),u!=t.examConfig.section.length-1?(l(),n("div",ls)):B("",!0)],64))),256))],4),t.isProblemVisible?B("",!0):(l(),n(C,{key:0},[t.isExamOver?(l(),n("div",ds,[i[7]||(i[7]=s("div",{class:"ts-text is-huge is-bold"},"考試結束",-1)),s("button",{class:"ts-button is-start-icon",onClick:i[1]||(i[1]=r=>{o("resetTimer")})},i[6]||(i[6]=[s("span",{class:"ts-icon is-arrow-rotate-left-icon"},null,-1),V("重新計時 ")]))])):(l(),n("div",os,[s("div",as,m(T(j).uni[t.uni]?T(j).uni[t.uni].shortName:"-")+"  "+m(t.year),1),s("div",rs,[s("div",us," 快速看過全部題目後再開始作答，考試時間為 "+m(Math.floor(t.examTimeSec/60))+" 分鐘，請做好配速。 ",1),i[2]||(i[2]=s("div",{class:"item"},"如果有給手寫答案紙，且題本沒有附註「只寫答案即可」，建議附上運算過程。",-1)),i[3]||(i[3]=s("div",{class:"item"},"簡單題目請先做完，若時間夠，驗算一遍後再做剩餘題目。",-1))]),s("button",{class:"ts-button is-start-icon",onClick:i[0]||(i[0]=r=>{o("clickStartExam")})},i[4]||(i[4]=[s("span",{class:"ts-icon is-pen-icon"},null,-1),V("開始作答 ")])),i[5]||(i[5]=s("div",{class:"ts-text is-small is-secondary is-italic"}," 如果你只想翻閱一下歷屆試題，可以關閉左側選單中的「測驗模式」 ",-1))]))],64))],64))}},ms=N(cs,[["__scopeId","data-v-96ab1491"]]),vs={class:"sidebar-table"},bs={__name:"ExamInfo",props:{uniShortName:String,year:String,subjectId:String,subject:String},setup(t){return(p,o)=>(l(),n("table",vs,[s("tbody",null,[s("tr",null,[o[0]||(o[0]=s("td",null,[s("span",{class:"ts-icon is-school-icon"})],-1)),s("td",null,m(t.uniShortName?t.uniShortName:"-"),1)]),s("tr",null,[o[1]||(o[1]=s("td",null,[s("span",{class:"ts-icon is-calendar-icon"})],-1)),s("td",null,m(t.year?t.year:"-")+" 年 ",1)]),s("tr",null,[o[3]||(o[3]=s("td",null,[s("span",{class:"ts-icon is-hashtag-icon"})],-1)),s("td",null,[s("span",null,m(t.subjectId?t.subjectId:"-"),1),o[2]||(o[2]=s("span",{class:"ts-icon is-circle-question-icon is-start-spaced","data-tooltip":"科目代號"},null,-1))])]),s("tr",null,[o[4]||(o[4]=s("td",null,[s("span",{class:"ts-icon is-file-icon"})],-1)),s("td",null,m(t.subject?t.subject:"-"),1)])])]))}},fs=N(bs,[["__scopeId","data-v-f6e85069"]]),xs={class:"ts-grid"},ps={class:"column"},gs={class:"ts-box is-vertical is-compact sidebar"},ys={class:"ts-content is-dense"},ks={class:"ts-content is-dense sidebar-setting"},Ss={class:"ts-switch"},Cs={class:"ts-content is-dense"},Es={class:"ts-wrap is-compact is-middle-aligned"},$s=["disabled"],Ts={key:0,class:"ts-icon is-pause-icon"},Vs={key:1,class:"ts-icon is-play-icon"},js=["disabled"],Ps={key:0,class:"sidebar-timer-time"},hs={key:1,class:"sidebar-timer-time"},Ns={class:"ts-content is-dense"},ws=["href","data-tooltip"],Is={key:1},_s={class:"column is-fluid"},Os={class:"ts-box"},Bs={__name:"ExamView",setup(t){const p=ss(),o=Y(),P=Z(),i=f(void 0),r=f(void 0),u=f({});U(()=>{D()});const D=()=>{if(!p.examScrollProbNo)return;d.value=!1;const a=10;let e=0;const v=setInterval(()=>{e++,e>a&&clearInterval(v);const b=document.querySelector(`#exam-paper-p${p.examScrollProbNo}`);b&&(b.scrollIntoView({behavior:"smooth",block:"start"}),p.examScrollProbNo=void 0,clearInterval(v))},100)};E(()=>o.params.id,async a=>{var e=a.split("-");if(e.length!=2){q(a);return}const[v,b]=e,O=await es(Object.assign({"../../components/exam/ntu/112/config.json":()=>M(()=>import("./config-CxR0YY-8.js"),[]),"../../components/exam/ntu/114/config.json":()=>M(()=>import("./config-BktvuiW9.js"),[])}),`../../components/exam/${v}/${b}/config.json`,7).catch(()=>F(v,b));O&&(i.value=v,r.value=b,u.value=O.default)},{immediate:!0});function q(a){console.error(`Wrong id format. (exam id: ${a})
`),P.push("/exam")}function F(a,e){console.error(`Exam config is not exist. (exam ${a}-${e})
-> Check if @/components/exam/${a}/${e}/config.json exist?
`),P.push("/exam")}const d=f(!0),x=f(!d.value),g=f(!1),y=f(6e3),c=f(y.value);E(d,a=>{S(),x.value=!a}),E(u,()=>{d.value&&w()});const A=()=>{c.value<=0||(z(),x.value||(x.value=!0))},w=()=>{S(),x.value=!1},L=()=>{S(),I(),x.value=!0};let h=null;const I=()=>{g.value=!0,h=setInterval(()=>{c.value--},1e3)},_=()=>{g.value=!1,clearInterval(h),h=null},S=()=>{_(),c.value=y.value},z=()=>{g.value?_():I()};E(c,a=>{a<=0&&(x.value=!1)});const W=()=>{};return(a,e)=>{const v=J("router-link");return l(),n("div",xs,[s("div",ps,[s("div",gs,[s("div",ys,[e[2]||(e[2]=s("span",{class:"ts-icon is-reply-icon is-end-spaced"},null,-1)),k(v,{to:"/exam",class:"hyperlink"},{default:G(()=>e[1]||(e[1]=[V(" 回題本選單")])),_:1})]),e[8]||(e[8]=s("div",{class:"ts-divider"},null,-1)),s("div",ks,[s("label",Ss,[K(s("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=b=>d.value=b)},null,512),[[Q,d.value]]),e[3]||(e[3]=s("span",null,"測驗模式 ",-1)),e[4]||(e[4]=s("span",{class:"ts-icon is-circle-question-icon","data-tooltip":"開啟測驗模式後，題本內容會在作答前被隱藏，<br>並且不顯示解答。","data-html":"true"},null,-1))])]),e[9]||(e[9]=s("div",{class:"ts-divider"},null,-1)),s("div",Cs,[k(fs,{uniShortName:T(j).uni[i.value]?T(j).uni[i.value].shortName:void 0,year:r.value,subjectId:u.value.id,subject:u.value.subject},null,8,["uniShortName","year","subjectId","subject"])]),e[10]||(e[10]=s("div",{class:"ts-divider"},null,-1)),s("div",{class:"ts-content is-dense sidebar-timer",style:$({opacity:d.value?1:.4})},[s("div",Es,[s("button",{class:"ts-button is-small is-icon is-outlined",onClick:A,disabled:!d.value},[g.value?(l(),n("span",Ts)):(l(),n("span",Vs))],8,$s),s("button",{class:"ts-button is-small is-icon is-outlined",onClick:w,disabled:!d.value},e[5]||(e[5]=[s("span",{class:"ts-icon is-rotate-left-icon"},null,-1)]),8,js),c.value>=0?(l(),n("span",Ps,m(Math.floor(c.value/60))+":"+m(String(c.value%60).padStart(2,"0")),1)):(l(),n("span",hs,"0:00"))]),s("div",{class:X(["ts-progress is-tiny sidebar-timer-progress",g.value?"is-processing":""])},[s("div",{class:"bar",style:$({"--value":100*(c.value/y.value),"background-color":c.value/y.value>.1?"#9bf":"#f88"})},null,4)],2)],4),e[11]||(e[11]=s("div",{class:"ts-divider"},null,-1)),s("div",Ns,[e[6]||(e[6]=s("span",{class:"ts-icon is-link-icon is-end-spaced"},null,-1)),u.value.link?(l(),n("a",{key:0,class:"hyperlink",href:u.value.link,"data-tooltip":u.value.linkTip?u.value.linkTip:"沒有附註任何東西捏 (´･ω･`)",target:"_blank"},"題本來源",8,ws)):(l(),n("span",Is,"來源未知"))]),e[12]||(e[12]=s("div",{class:"ts-divider"},null,-1)),s("div",{class:"ts-content is-dense"},[s("button",{class:"ts-button is-outlined is-start-icon",onClick:W,"data-tooltip":"暫時想不到要怎麼做 ฅ^⦁⩊⦁^ฅ ੭"},e[7]||(e[7]=[s("span",{class:"ts-icon is-download-icon"},null,-1),V("下載題本 ")]))])])]),s("div",_s,[s("div",Os,[k(ms,{uni:i.value,year:r.value,examConfig:u.value,isContentVisible:!d.value,isProblemVisible:x.value,isExamOver:c.value<=0,examTimeSec:y.value,onClickStartExam:L,onResetTimer:S},null,8,["uni","year","examConfig","isContentVisible","isProblemVisible","isExamOver","examTimeSec"])])])])}}},qs=N(Bs,[["__scopeId","data-v-ccf9bc33"]]);export{qs as default};
